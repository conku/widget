!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=t("body"),n="qor.widget",o="enable."+n,s="disable."+n,a="change."+n,r='[name="QorResource.Widgets"]';return e.prototype={constructor:e,init:function(){this.bind(),this.addWidgetSlideout(),this.initSelect()},bind:function(){this.$element.on(a,"select",this.change)},unbind:function(){this.$element.off(a,"select",this.change)},initSelect:function(){t("select").closest(".qor-form-section").hide(),t("select").each(function(){t(this).find("option").filter('[value!=""]').size()>=2&&t(this).closest(".qor-form-section").show()})},addWidgetSlideout:function(){var e,n,o=t(r),s=i.data("tabScopeActive"),a=t(".qor-slideout").is(":visible"),c=o.closest("form").data("action-url")||o.closest("form").prop("action");o.find("option").each(function(){var i=t(this),r=i.val();r&&(e=c+"?widget_type="+r,s&&(e=e+"&widget_scope="+s),n=a?"<a href="+e+' style="display: none;" class="qor-widget-'+r+'" data-open-type="slideout" data-url="'+e+'">'+r+"</a>":"<a href="+e+' style="display: none;" class="qor-widget-'+r+'">'+r+"</a>",o.after(n))})},change:function(e){var i=t(e.target),n=i.val(),o=t(".qor-slideout").is(":visible");if(i.is(r)){var s=".qor-widget-"+n;return t.fn.qorSlideoutBeforeHide=null,window.onbeforeunload=null,o?t(s).trigger("click"):location.href=t(s).prop("href"),!1}},destroy:function(){this.unbind()}},e.DEFAULTS={},e.plugin=function(i){return this.each(function(){var o,s=t(this),a=s.data(n);if(!a){if(/destroy/.test(i))return;s.data(n,a=new e(this,i))}"string"==typeof i&&t.isFunction(o=a[i])&&o.apply(a)})},t(function(){var i='[data-toggle="qor.widget"]';t(document).on(s,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(o,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(o),t(".qor-page__header .qor-page-subnav__header").length&&t(".mdl-layout__content").addClass("has-subnav")}),e});
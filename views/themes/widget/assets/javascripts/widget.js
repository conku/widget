!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){"use strict";function t(i,n){this.$element=e(i),this.options=e.extend({},t.DEFAULTS,e.isPlainObject(n)&&n),this.init()}var i=e("body"),n="qor.widget",o="enable."+n,s="disable."+n,r="change."+n,a='[name="QorResource.Widgets"]';return t.prototype={constructor:t,init:function(){this.bind(),this.addWidgetSlideout(),this.initSelect()},bind:function(){this.$element.on(r,"select",this.change)},unbind:function(){this.$element.off(r,"select",this.change)},initSelect:function(){e("select").closest(".qor-form-section").hide(),e("select").each(function(){e(this).find("option").filter('[value!=""]').size()>=2&&e(this).closest(".qor-form-section").show()})},addWidgetSlideout:function(){var t,n,o=e(a),s=i.data("tabScopeActive"),r=e(".qor-slideout").is(":visible"),c=o.closest("form").prop("action");o.find("option").each(function(){var i=e(this),a=i.val();a&&(t=c+"?widget_type="+a,s&&(t=t+"&widget_scope="+s),n=r?"<a href="+t+' style="display: none;" class="qor-widget-'+a+'" data-open-type="slideout" data-url="'+t+'">'+a+"</a>":"<a href="+t+' style="display: none;" class="qor-widget-'+a+'">'+a+"</a>",o.after(n))})},change:function(t){var i=e(t.target),n=i.val(),o=e(".qor-slideout").is(":visible");if(i.is(a)){var s=".qor-widget-"+n;return e.fn.qorSlideoutBeforeHide=null,window.onbeforeunload=null,o?e(s).trigger("click"):location.href=e(s).prop("href"),!1}},destroy:function(){this.unbind()}},t.DEFAULTS={},t.plugin=function(i){return this.each(function(){var o,s=e(this),r=s.data(n);if(!r){if(/destroy/.test(i))return;s.data(n,r=new t(this,i))}"string"==typeof i&&e.isFunction(o=r[i])&&o.apply(r)})},e(function(){var i='[data-toggle="qor.widget"]';e(document).on(s,function(n){t.plugin.call(e(i,n.target),"destroy")}).on(o,function(n){t.plugin.call(e(i,n.target))}).triggerHandler(o),e(".qor-page__header .qor-page-subnav__header").length&&e(".mdl-layout__content").addClass("has-subnav")}),t});